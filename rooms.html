<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>Ø§Ù„Ø£ÙˆØ¶ | Ù…Ø¤ØªÙ…Ø± Ekalo Mode</title>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Cairo', sans-serif;
      margin: 0;
      padding: 0;
      background: linear-gradient(to right, #e0f7fa, #fff);
    }

    nav {
      background-color: #004d40;
      color: white;
      display: flex;
      justify-content: center;
      gap: 2em;
      padding: 1em;
      font-size: 1.2em;
    }

    nav a {
      color: white;
      text-decoration: none;
      transition: 0.3s;
    }

    nav a:hover {
      color: #ffeb3b;
    }

    header {
      background-color: #00796b;
      color: white;
      text-align: center;
      padding: 2em;
      font-size: 2.5em;
      border-bottom: 4px solid #004d40;
    }

    .room {
      max-width: 600px;
      margin: 3em auto;
      background-color: white;
      border-radius: 15px;
      box-shadow: 0 0 15px rgba(0,0,0,0.1);
      padding: 2em;
      opacity: 0;
      transform: translateY(30px) scale(0.95);
      animation: roomFadeIn 1s ease forwards;
    }

    @keyframes roomFadeIn {
      to {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }

    .room h2 {
      text-align: center;
      color: #004d40;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 1.5em;
    }

    th, td {
      border: 1px solid #ddd;
      padding: 0.8em;
      text-align: center;
    }

    th {
      background-color: #004d40;
      color: white;
    }

    footer {
      text-align: center;
      padding: 1em;
      background-color: #004d40;
      color: #ccc;
      margin-top: 3em;
    }
  </style>
</head>
<body>

  <nav>
    <a href="index.html">Home</a>
    <a href="rooms.html">Rooms</a>
    <a href="teams.html">Teams</a>
    <a href="#">Rules</a>
  </nav>

  <header>ğŸ›ï¸ Ø§Ù„Ø£ÙˆØ¶</header>

  <div id="roomsContainer"></div>

  <footer>Â© 2025 Ekalo Mode Camp</footer>

  <script>
    const roomsContainer = document.getElementById('roomsContainer');

    async function fetchRooms() {
      try {
        const response = await fetch('https://opensheet.elk.sh/1c3WdLvAbbhd6bPcWRHKXjXeNt9wknwWnyMko3HBMpXU/Rooms'); // Ø¶Ø¹ Ø±Ø§Ø¨Ø· Ø§Ù„Ø´ÙŠØª Ø§Ù„ØµØ­ÙŠØ­ Ù‡Ù†Ø§
        const data = await response.json();

        // ØªØ¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ ØªØ­Øª ÙƒÙ„ Ø£ÙˆØ¶Ø©
        const roomsMap = {};
        data.forEach(row => {
          if (!roomsMap[row.Room]) {
            roomsMap[row.Room] = [];
          }
          roomsMap[row.Room].push(row.Name);
        });

        // ØªÙ†Ø¸ÙŠÙ ÙˆØ¹Ø±Ø¶
        roomsContainer.innerHTML = '';

        Object.keys(roomsMap).sort().forEach(roomName => {
          const card = document.createElement('div');
          card.className = 'room';

          const title = document.createElement('h2');
          title.textContent = `ğŸ›ï¸ Ø£ÙˆØ¶Ø© ${roomName}`;

          const table = document.createElement('table');
          const thead = document.createElement('thead');
          thead.innerHTML = '<tr><th>Ø±Ù‚Ù…</th><th>Ø§Ù„Ø§Ø³Ù…</th></tr>';
          table.appendChild(thead);

          const tbody = document.createElement('tbody');
          roomsMap[roomName].forEach((name, index) => {
            const tr = document.createElement('tr');
            tr.innerHTML = `<td>${index + 1}</td><td>${name}</td>`;
            tbody.appendChild(tr);
          });
          table.appendChild(tbody);

          card.appendChild(title);
          card.appendChild(table);
          roomsContainer.appendChild(card);
        });

      } catch (error) {
        console.error('Error fetching room data:', error);
        roomsContainer.innerHTML = '<p style="text-align:center;color:#d32f2f;">Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª. ØªØ£ÙƒØ¯ Ù…Ù† Ø±Ø§Ø¨Ø· Ø§Ù„Ø´ÙŠØª.</p>';
      }
    }

    fetchRooms();
  </script>

</body>
</html>
